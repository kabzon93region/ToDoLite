# üìä –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ ToDoLite v1.5.7

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 10 –Ω–æ—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** v1.5.7-dev  
**–ê–Ω–∞–ª–∏—Ç–∏–∫:** AI Assistant  
**–¢–∏–ø:** Comprehensive Security, Performance & Threading Analysis

---

## üéØ –¶–µ–ª—å –∞–Ω–∞–ª–∏–∑–∞

–ü—Ä–æ–≤–µ—Å—Ç–∏ –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ ToDoLite –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç:
- üîí **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** - –≤—ã—è–≤–ª–µ–Ω–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –∏ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –º–µ—Å—Ç
- ‚ö° **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- üîÑ **–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏** - –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –º–µ—Å—Ç–∞ –¥–ª—è –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

---

## üîí 1. –ê–ù–ê–õ–ò–ó –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò

### ‚úÖ –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã

#### 1.1 SQL Injection Protection ‚úÖ
- **–°—Ç–∞—Ç—É—Å:** –•–æ—Ä–æ—à–æ –∑–∞—â–∏—â–µ–Ω–æ
- **–î–µ—Ç–∞–ª–∏:**
  - –í—Å–µ SQL –∑–∞–ø—Ä–æ—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (`?` placeholders)
  - –ù–µ—Ç –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏–∏ —Å—Ç—Ä–æ–∫ –≤ SQL –∑–∞–ø—Ä–æ—Å–∞—Ö
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `sqlite3` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
  - `DatabaseManager` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ `execute_query()`
- **–ü—Ä–∏–º–µ—Ä—ã:**
  ```python
  c.execute("SELECT * FROM tasks WHERE id = ?", (task_id,))
  c.execute("INSERT INTO tasks (...) VALUES (?, ?, ?)", (title, desc, status))
  ```

#### 1.2 XSS Protection ‚úÖ
- **–°—Ç–∞—Ç—É—Å:** –•–æ—Ä–æ—à–æ –∑–∞—â–∏—â–µ–Ω–æ
- **–î–µ—Ç–∞–ª–∏:**
  - Jinja2 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç HTML –≤ —à–∞–±–ª–æ–Ω–∞—Ö
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `|safe` —Ñ–∏–ª—å—Ç—Ä–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è –¥–æ–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (Markdown)
  - Markdown –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –±–µ–∑–æ–ø–∞—Å–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É —Å —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏–µ–π
  - –§—É–Ω–∫—Ü–∏—è `sanitize_html()` –≤ `app.py` —É–¥–∞–ª—è–µ—Ç –æ–ø–∞—Å–Ω—ã–µ —Ç–µ–≥–∏ –∏ –∞—Ç—Ä–∏–±—É—Ç—ã
- **–§–∞–π–ª—ã:**
  - `app.py:432-490` - —Ñ—É–Ω–∫—Ü–∏—è `sanitize_html()`
  - `markdown_utils.py` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ Markdown —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π

#### 1.3 Input Validation ‚úÖ
- **–°—Ç–∞—Ç—É—Å:** –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- **–î–µ—Ç–∞–ª–∏:**
  - –í–∞–ª–∏–¥–∞—Ü–∏—è Markdown —á–µ—Ä–µ–∑ `validate_markdown()` –≤ `markdown_utils.py`
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –ø–µ—Ä–µ–¥ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á –≤ `import_manager.py`
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –Ω–∞ –¥–æ–ø—É—Å—Ç–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- **–ü—Ä–∏–º–µ—Ä—ã:**
  ```python
  valid_statuses = ['new', 'later', 'tracking', 'working', 'waiting', 'think', 'done', 'cancelled']
  valid_priorities = ['low', 'medium', 'high', 'urgent']
  ```

#### 1.4 File Security ‚úÖ
- **–°—Ç–∞—Ç—É—Å:** –•–æ—Ä–æ—à–æ –∑–∞—â–∏—â–µ–Ω–æ
- **–î–µ—Ç–∞–ª–∏:**
  - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Ç–µ–π —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
  - –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –ë–î –ø–µ—Ä–µ–¥ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º

---

### ‚ö†Ô∏è –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

#### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

##### 1. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ CSRF –∑–∞—â–∏—Ç—ã üî¥
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç CSRF –∞—Ç–∞–∫ –¥–ª—è POST/PUT/DELETE –∑–∞–ø—Ä–æ—Å–æ–≤
- **–†–∏—Å–∫:** –ó–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏—è –æ—Ç –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** –í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö –≤ `app.py`
- **–ü—Ä–∏–º–µ—Ä—ã —É—è–∑–≤–∏–º—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤:**
  - `/create_task` (POST)
  - `/update_task/<task_id>` (POST)
  - `/delete_task/<task_id>` (POST)
  - `/archive_task/<task_id>` (POST)
  - `/restore_task/<task_id>` (POST)
- **–†–µ—à–µ–Ω–∏–µ:**
  ```python
  from flask_wtf.csrf import CSRFProtect
  csrf = CSRFProtect(app)
  ```
  –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–∫–µ–Ω—ã –≤ —Ñ–æ—Ä–º—ã —á–µ—Ä–µ–∑ `{{ csrf_token() }}`

##### 2. –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π üî¥
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è SHA-256 –±–µ–∑ —Å–æ–ª–∏ –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π
- **–†–∏—Å–∫:** –£—è–∑–≤–∏–º–æ—Å—Ç—å –∫ rainbow table –∞—Ç–∞–∫–∞–º
- **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `auth.py:50-52`
- **–¢–µ–∫—É—â–∏–π –∫–æ–¥:**
  ```python
  def _hash_password(self, password):
      return hashlib.sha256(password.encode()).hexdigest()
  ```
- **–†–µ—à–µ–Ω–∏–µ:**
  ```python
  import bcrypt
  def _hash_password(self, password):
      salt = bcrypt.gensalt()
      return bcrypt.hashpw(password.encode(), salt)
  ```

##### 3. –ü—Ä—è–º—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã –≤ app.py üî¥
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –í `app.py` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î –≤–º–µ—Å—Ç–æ `DatabaseManager`
- **–†–∏—Å–∫:** 
  - –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
  - –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É—Ç–µ—á–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
  - –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Å—Ç–∞ –≤ `app.py` (—Å—Ç—Ä–æ–∫–∏ 44, 132, 141, 221, 531, 549, 585, 593, 601, 628, 656)
- **–ü—Ä–∏–º–µ—Ä—ã:**
  ```python
  conn = sqlite3.connect('tasks.db')
  c = conn.cursor()
  c.execute("SELECT * FROM tasks WHERE archived = 0...")
  ```
- **–†–µ—à–µ–Ω–∏–µ:** –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã –Ω–∞ `DatabaseManager.execute_query()`

#### üü° –°—Ä–µ–¥–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

##### 4. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ rate limiting üü°
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤
- **–†–∏—Å–∫:** –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å DoS –∞—Ç–∞–∫ –∏–ª–∏ brute force
- **–†–µ—à–µ–Ω–∏–µ:**
  ```python
  from flask_limiter import Limiter
  limiter = Limiter(app, key_func=get_remote_address)
  ```

##### 5. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —É—Ç–µ—á–∫–∏ –≤ –æ—à–∏–±–∫–∞—Ö üü°
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –í –ª–æ–≥–∞—Ö –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å—Å—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `database_manager.py:110` - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ SQL –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- **–†–∏—Å–∫:** –£—Ç–µ—á–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î –∏ –¥–∞–Ω–Ω—ã—Ö
- **–†–µ—à–µ–Ω–∏–µ:** –ú–∞—Å–∫–∏—Ä–æ–≤–∞—Ç—å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ª–æ–≥–∞—Ö

##### 6. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö üü°
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞ —Ä–∞–∑–º–µ—Ä –ø–æ–ª–µ–π –∑–∞–¥–∞—á –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- **–†–∏—Å–∫:** –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å DoS —á–µ—Ä–µ–∑ –±–æ–ª—å—à–∏–µ –¥–∞–Ω–Ω—ã–µ
- **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–ª–∏–Ω—ã –ø–æ–ª–µ–π

##### 7. –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Å–µ—Å—Å–∏—è–º–∏ üü°
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π
- **–û–ø–∏—Å–∞–Ω–∏–µ:** 
  - –ù–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ `SESSION_COOKIE_SECURE` –∏ `SESSION_COOKIE_HTTPONLY`
  - –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ä–æ—Ç–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞
- **–†–∏—Å–∫:** –ü–µ—Ä–µ—Ö–≤–∞—Ç —Å–µ—Å—Å–∏–π
- **–†–µ—à–µ–Ω–∏–µ:**
  ```python
  app.config['SESSION_COOKIE_SECURE'] = True
  app.config['SESSION_COOKIE_HTTPONLY'] = True
  app.config['SECRET_KEY'] = os.urandom(32)
  ```

#### üü¢ –ù–∏–∑–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

##### 8. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ security headers üü¢
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–∏–∑–∫–∏–π
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ù–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (X-Frame-Options, X-Content-Type-Options, etc.)
- **–†–µ—à–µ–Ω–∏–µ:**
  ```python
  @app.after_request
  def set_security_headers(response):
      response.headers['X-Frame-Options'] = 'DENY'
      response.headers['X-Content-Type-Options'] = 'nosniff'
      response.headers['X-XSS-Protection'] = '1; mode=block'
      return response
  ```

##### 9. Debug —Ä–µ–∂–∏–º –≤ production üü¢
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–∏–∑–∫–∏–π
- **–û–ø–∏—Å–∞–Ω–∏–µ:** `app.run(debug=True)` –≤ `app.py:1013`
- **–†–∏—Å–∫:** –£—Ç–µ—á–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ—à–∏–±–∫–∞—Ö
- **–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è debug —Ä–µ–∂–∏–º–æ–º

---

## ‚ö° 2. –ê–ù–ê–õ–ò–ó –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò

### üîç –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

##### 1. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î üî¥
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π
- **–û–ø–∏—Å–∞–Ω–∏–µ:** 
  - –í `app.py` —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
  - –ù–µ—Ç connection pooling
  - –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç/–∑–∞–∫—Ä—ã–≤–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ `app.py` (get_tasks, get_tasks_by_mode, create_task, update_task, etc.)
- **–ü—Ä–∏–º–µ—Ä:**
  ```python
  def get_tasks():
      conn = sqlite3.connect('tasks.db')  # –ù–æ–≤–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
      c = conn.cursor()
      c.execute("SELECT * FROM tasks...")
      tasks = c.fetchall()
      conn.close()  # –ó–∞–∫—Ä—ã—Ç–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
  ```
- **–í–ª–∏—è–Ω–∏–µ:** –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É, –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- **–†–µ—à–µ–Ω–∏–µ:**
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `DatabaseManager` –≤–µ–∑–¥–µ
  - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å connection pooling —á–µ—Ä–µ–∑ `sqlite3.connect()` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `check_same_thread=False` –∏ –ø—É–ª–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
  - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

##### 2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –≤ –ë–î üî¥
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ù–µ—Ç –∏–Ω–¥–µ–∫—Å–æ–≤ –Ω–∞ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–æ–ª—è—Ö
- **–í–ª–∏—è–Ω–∏–µ:** –ü–æ–ª–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ
- **–†–µ—à–µ–Ω–∏–µ:**
  ```sql
  CREATE INDEX idx_tasks_archived ON tasks(archived);
  CREATE INDEX idx_tasks_status ON tasks(status);
  CREATE INDEX idx_tasks_due_date ON tasks(due_date);
  CREATE INDEX idx_tasks_scheduled_date ON tasks(scheduled_date);
  CREATE INDEX idx_tasks_created_at ON tasks(created_at);
  CREATE INDEX idx_task_comments_task_id ON task_comments(task_id);
  ```

##### 3. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ SQL –∑–∞–ø—Ä–æ—Å–æ–≤ üî¥
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö
- **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** 
  - `get_tasks_by_mode()` –∏ `get_tasks_by_mode_with_comments()` –∏–º–µ—é—Ç –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–µ SELECT –∑–∞–ø—Ä–æ—Å—ã
  - –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–¥–∞—á –ø–æ —Ä–µ–∂–∏–º—É
- **–ü—Ä–∏–º–µ—Ä:**
  ```python
  # –í get_tasks_by_mode() –∏ get_tasks_by_mode_with_comments()
  # –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ SELECT –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è kanban –∏ eisenhower —Ä–µ–∂–∏–º–æ–≤
  ```
- **–†–µ—à–µ–Ω–∏–µ:** –í—ã–Ω–µ—Å—Ç–∏ –æ–±—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã `DatabaseManager`

##### 4. N+1 –ø—Ä–æ–±–ª–µ–º–∞ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ üü°
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–º –∑–∞–ø—Ä–æ—Å–æ–º –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏
- **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `app.py:299-302`
- **–ü—Ä–∏–º–µ—Ä:**
  ```python
  for task in tasks:
      task_id = task[0]
      c.execute("SELECT comment FROM task_comments WHERE task_id = ?", (task_id,))
      comments = c.fetchall()
  ```
- **–í–ª–∏—è–Ω–∏–µ:** –ü—Ä–∏ 100 –∑–∞–¥–∞—á–∞—Ö –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è 101 –∑–∞–ø—Ä–æ—Å –≤–º–µ—Å—Ç–æ 2
- **–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å JOIN –∏–ª–∏ –∑–∞–≥—Ä—É–∂–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º:
  ```sql
  SELECT t.*, GROUP_CONCAT(tc.comment) as comments
  FROM tasks t
  LEFT JOIN task_comments tc ON t.id = tc.task_id
  GROUP BY t.id
  ```

#### üü° –°—Ä–µ–¥–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

##### 5. –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å ORDER BY üü°
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –°–ª–æ–∂–Ω—ã–µ CASE –≤—ã—Ä–∞–∂–µ–Ω–∏—è –≤ ORDER BY –±–µ–∑ –∏–Ω–¥–µ–∫—Å–æ–≤
- **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `app.py:165-191`
- **–ü—Ä–∏–º–µ—Ä:**
  ```sql
  ORDER BY 
      CASE priority WHEN 'high' THEN 1 WHEN 'medium' THEN 2 ELSE 3 END,
      COALESCE(due_date, '') ASC
  ```
- **–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å —Å–æ—Å—Ç–∞–≤–Ω–æ–π –∏–Ω–¥–µ–∫—Å –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á–∏—Å–ª–æ–≤–æ–µ –ø–æ–ª–µ –¥–ª—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞

##### 6. –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –∑–∞–¥–∞—á –≤ –ø–∞–º—è—Ç—å üü°
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –í—Å–µ –∑–∞–¥–∞—á–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ –ø–∞–º—è—Ç—å —Å—Ä–∞–∑—É, –¥–∞–∂–µ –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç—å
- **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–¥–∞—á
- **–í–ª–∏—è–Ω–∏–µ:** –í—ã—Å–æ–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –∑–∞–¥–∞—á
- **–†–µ—à–µ–Ω–∏–µ:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é

##### 7. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è üü°
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ù–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–ü—Ä–∏–º–µ—Ä—ã:**
  - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ
  - –°—Ç–∞—Ç—É—Å—ã –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –Ω–µ –∫—ç—à–∏—Ä—É—é—Ç—Å—è
- **–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `functools.lru_cache` –∏–ª–∏ Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

##### 8. –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ Markdown üü°
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–∏–∑–∫–∏–π
- **–û–ø–∏—Å–∞–Ω–∏–µ:** Markdown –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ, –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è
- **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `markdown_utils.py`
- **–†–µ—à–µ–Ω–∏–µ:** –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π HTML

#### üü¢ –ù–∏–∑–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

##### 9. –ò–∑–±—ã—Ç–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ üü¢
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–∏–∑–∫–∏–π
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ú–Ω–æ–≥–æ –ª–æ–≥–æ–≤ –Ω–∞ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å
- **–í–ª–∏—è–Ω–∏–µ:** –ó–∞–º–µ–¥–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã, –∏–∑–Ω–æ—Å –¥–∏—Å–∫–∞
- **–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ—Ç–∫–ª—é—á–∞—Ç—å debug –ª–æ–≥–∏ –≤ production

---

## üîÑ 3. –ê–ù–ê–õ–ò–ó –ú–ù–û–ì–û–ü–û–¢–û–ß–ù–û–°–¢–ò

### ‚úÖ –¢–µ–∫—É—â–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏

#### 1. DatabaseManager —Å Lock ‚úÖ
- **–°—Ç–∞—Ç—É—Å:** –•–æ—Ä–æ—à–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `threading.Lock()` –¥–ª—è –∑–∞—â–∏—Ç—ã –¥–æ—Å—Ç—É–ø–∞ –∫ –ë–î
- **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `database_manager.py:19, 91`
- **–ö–æ–¥:**
  ```python
  self.lock = threading.Lock()
  with self.lock:
      conn = self.get_connection()
      # ... –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞
  ```
- **–û—Ü–µ–Ω–∫–∞:** –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è SQLite (–Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø–∏—Å–∏)

#### 2. CategoryMigrationManager —Å Thread ‚úÖ
- **–°—Ç–∞—Ç—É—Å:** –•–æ—Ä–æ—à–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ –∑–∞–¥–∞—á
- **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `category_migration_manager.py`
- **–ö–æ–¥:**
  ```python
  def _scheduler_loop(self):
      while self.running:
          time.sleep(self.interval_minutes * 60)
          self.migrate_tasks()
  ```
- **–û—Ü–µ–Ω–∫–∞:** –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è, –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫

#### 3. BackupManager —Å Lock ‚úÖ
- **–°—Ç–∞—Ç—É—Å:** –•–æ—Ä–æ—à–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `threading.Lock()` –¥–ª—è –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–π
- **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `backup_manager.py:29`
- **–û—Ü–µ–Ω–∫–∞:** –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

#### 4. –†—É—á–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ ‚úÖ
- **–°—Ç–∞—Ç—É—Å:** –•–æ—Ä–æ—à–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –†—É—á–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ
- **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `category_migration_manager.py:387-391`, `app.py:978-985`
- **–ö–æ–¥:**
  ```python
  def migrate_tasks_async(self):
      thread = threading.Thread(target=self.migrate_tasks, daemon=True)
      thread.start()
  ```
- **–û—Ü–µ–Ω–∫–∞:** –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è, –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç UI

### ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏

#### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

##### 1. SQLite –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø–∏—Å–∏ üî¥
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ SQLite)
- **–û–ø–∏—Å–∞–Ω–∏–µ:** SQLite –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤
- **–¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `Lock()` –≤ `DatabaseManager`
- **–û—Ü–µ–Ω–∫–∞:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ, –Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞ –¥–ª—è SQLite

#### üü° –°—Ä–µ–¥–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

##### 2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—É–ª–∞ –ø–æ—Ç–æ–∫–æ–≤ –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á üü°
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ö–∞–∂–¥–∞—è —Ñ–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –ø–æ—Ç–æ–∫
- **–ü—Ä–∏–º–µ—Ä—ã:**
  - –†—É—á–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –ø–æ—Ç–æ–∫ –∫–∞–∂–¥—ã–π —Ä–∞–∑
  - –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
- **–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `ThreadPoolExecutor`:
  ```python
  from concurrent.futures import ThreadPoolExecutor
  executor = ThreadPoolExecutor(max_workers=3)
  executor.submit(self.migrate_tasks)
  ```

##### 3. –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ race conditions –≤ app.py üü°
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ü—Ä—è–º—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã –≤ `app.py` –Ω–µ –∑–∞—â–∏—â–µ–Ω—ã Lock'–æ–º
- **–†–∏—Å–∫:** –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö
- **–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `DatabaseManager` –≤–µ–∑–¥–µ

### ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –º–µ—Å—Ç–∞ –¥–ª—è –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏

#### 1. –û–±—Ä–∞–±–æ—Ç–∫–∞ Markdown ‚úÖ
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –û–±—Ä–∞–±–æ—Ç–∫–∞ Markdown –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
- **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `markdown_utils.py`
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—É–ª –ø–æ—Ç–æ–∫–æ–≤ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–∞–¥–∞—á –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `MarkdownProcessor` thread-safe

#### 2. –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö ‚úÖ
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –ë–î
- **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `import_manager.py`, `markdown_utils.py`
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ú–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –ø–µ—Ä–µ–¥ –∑–∞–ø–∏—Å—å—é –≤ –ë–î

#### 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞—Ä—Ö–∏–≤–æ–≤ ‚úÖ
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–æ–≤ - –¥–ª–∏—Ç–µ–ª—å–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –ë–î
- **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `backup_manager.py`
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£–∂–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ, –º–æ–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ –ø—É–ª –ø–æ—Ç–æ–∫–æ–≤

#### 4. –≠–∫—Å–ø–æ—Ä—Ç/–ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö ‚úÖ
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –û–ø–µ—Ä–∞—Ü–∏–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞/–∏–º–ø–æ—Ä—Ç–∞ –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤ —Ñ–æ–Ω–µ
- **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `import_manager.py`, `backup_manager.py`
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

#### 5. –û–±—Ä–∞–±–æ—Ç–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π ‚úÖ
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫
- **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `reminder_manager.py`, `notifications_windows.py`
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£–∂–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –º–æ–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å

---

## üìã 4. –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –ü–†–ò–û–†–ò–¢–ï–¢–ê–ú

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ)

1. **–î–æ–±–∞–≤–∏—Ç—å CSRF –∑–∞—â–∏—Ç—É** - –∑–∞—â–∏—Ç–∞ –æ—Ç –∞—Ç–∞–∫
2. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å bcrypt
3. **–ó–∞–º–µ–Ω–∏—Ç—å –ø—Ä—è–º—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ DatabaseManager** - —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
4. **–î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –≤ –ë–î** - –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### üü° –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è)

5. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å connection pooling** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ë–î
6. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å N+1 –ø—Ä–æ–±–ª–µ–º—É —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
7. **–î–æ–±–∞–≤–∏—Ç—å rate limiting** - –∑–∞—â–∏—Ç–∞ –æ—Ç DoS
8. **–í—ã–Ω–µ—Å—Ç–∏ –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è SQL –∑–∞–ø—Ä–æ—Å—ã** - —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

### üü¢ –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å)

9. **–î–æ–±–∞–≤–∏—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏
10. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
11. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ThreadPoolExecutor** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ—Ç–æ–∫–æ–≤
12. **–î–æ–±–∞–≤–∏—Ç—å security headers** - —É–ª—É—á—à–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### üîµ –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)

13. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Å–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏
14. **–ö—ç—à–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π Markdown** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
15. **–î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ä–∞–∑–º–µ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö** - –∑–∞—â–∏—Ç–∞ –æ—Ç DoS

---

## üìä 5. –ú–ï–¢–†–ò–ö–ò –ò –û–¶–ï–ù–ö–ò

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞:** üü° 6/10
  - ‚úÖ SQL Injection: 10/10
  - ‚úÖ XSS Protection: 9/10
  - üî¥ CSRF Protection: 0/10
  - üî¥ Password Security: 3/10
  - üü° Input Validation: 7/10
  - üü° Session Security: 5/10

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞:** üü° 5/10
  - üî¥ Database Connections: 3/10
  - üî¥ Database Indexes: 2/10
  - üü° Query Optimization: 6/10
  - üü° Caching: 0/10
  - üü° Memory Usage: 5/10

### –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å
- **–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞:** üü¢ 7/10
  - ‚úÖ Thread Safety: 8/10
  - ‚úÖ Background Tasks: 8/10
  - üü° Thread Pool: 5/10
  - üü° Race Conditions: 6/10

---

## üìù 6. –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–ü—Ä–æ–µ–∫—Ç ToDoLite –∏–º–µ–µ—Ç **—Ö–æ—Ä–æ—à—É—é –æ—Å–Ω–æ–≤—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** (SQL injection, XSS –∑–∞—â–∏—Ç–∞), –Ω–æ —Ç—Ä–µ–±—É–µ—Ç **–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —É–ª—É—á—à–µ–Ω–∏–π** –≤ –æ–±–ª–∞—Å—Ç–∏ CSRF –∑–∞—â–∏—Ç—ã –∏ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π. 

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** —Å—Ç—Ä–∞–¥–∞–µ—Ç –æ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤ –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∫ –ë–î, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è.

**–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å** —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è SQLite, –Ω–æ –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –ø—É–ª—ã –ø–æ—Ç–æ–∫–æ–≤.

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—á–∞—Ç—å —Å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ë–î**, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ –∏–º–µ—é—Ç –Ω–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 10 –Ω–æ—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è –æ—Ç—á–µ—Ç–∞:** 1.0  
**–°–ª–µ–¥—É—é—â–∏–π –∞–Ω–∞–ª–∏–∑:** –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º

